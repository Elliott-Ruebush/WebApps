<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Color Changing Creation</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<style>
    th {
        padding: 60px;
        border: 5px double black
    }
</style>

<body>
    <h1 id='mainHeading'>Welcome to the beautiful background color changer</h1>
    <p id='firstParagraph'>Hello world!</p>
    <p id='secondParagraph'>MORE HELLO WORLD</p>
    <button id="Unleasher">Unleash color hell!!!</button>
    <button onclick='unleashSynchronizedColorHell()'>Make it in sync</button>
    <button id="Stopper">Make it stop</button>
    <button onclick='location.reload()'>Reset everything and pretend it's all ok</button>
    <table id="tableContainer">
        <tr>
            <th id="OneOne"></th>
            <th id="TwoOne"></th>
            <th id="ThreeOne"></th>
            <th id="FourOne"></th>
        </tr>
        <tr>
            <th id="OneTwo"></th>
            <th id="TwoTwo"></th>
            <th id="ThreeTwo"></th>
            <th id="FourTwo"></th>
        </tr>
        <tr>
            <th id="OneThree"></th>
            <th id="TwoThree"></th>
            <th id="ThreeThree"></th>
            <th id="FourThree"></th>
        </tr>
        <tr>
            <th id="OneFour"></th>
            <th id="TwoFour"></th>
            <th id="ThreeFour"></th>
            <th id="FourFour"></th>
        </tr>
    </table>
</body>
<script>
    //I don't think this is what I'm supposed to do but it works, this is just making sure that the I can access the helpPlease variable from anywhere in the script
    var helpPlease;
    var otherHelpMe;
    document.getElementById('Unleasher').onclick = unleashColorHell;    
    document.getElementById('Stopper').onclick = stopBothMaybe;

    function stopBothMaybe(){
        clearInterval(helpPlease);
        clearInterval(otherHelpMe);
    }
    
    function assignRandomColorFromNodes() {
        var hexCode = "";
        var hexBasesArr = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'A', 'B', 'C', 'D', 'E', 'F'];
        for (i = 0; i < 6; i++) {
            hexCode = hexCode.concat(hexBasesArr[Math.floor(Math.random() * 16)]);
        }
        hexCode = '#' + hexCode;
        console.log(hexCode);
        getRandomNode().style.backgroundColor = hexCode;
    }

    function assignRandomColorFromID(){
        var hexCode = "";
        var hexBasesArr = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'A', 'B', 'C', 'D', 'E', 'F'];
        for (i = 0; i < 6; i++) {
            hexCode = hexCode.concat(hexBasesArr[Math.floor(Math.random() * 16)]);
        }
        hexCode = '#' + hexCode;
        console.log(hexCode);
        document.getElementById(getRandomID()).style.backgroundColor = hexCode;
    }

    function getRandomNode() {
        /*
        Returns a random node from the table
        */
        var documentNodeArr = [];
        var nodes = document.getElementById('tableContainer').childNodes;
        for (var i = 0; i < nodes.length; i++) {
            documentNodeArr.push(nodes[i]);
        }
        return documentNodeArr[Math.floor(Math.random() * documentNodeArr.length)];
    }

    function getRandomID(){
        /*
        This code calls a function to return a collection of all IDs in the document, 
        then it maps the IDs in that collection to an array. Following the creation of 
        the array, the function returns a random ID from the array of IDs  
        */
        var documentIDs = document.querySelectorAll('[id]');
        var documentIDArr = Array.prototype.map.call(documentIDs, function (element, index) {
            console.log(element + ", " + index);
            console.log(element.id);
            return element.id
        });
        return documentIDArr[Math.floor(Math.random() * documentIDArr.length)];
    }

    function unleashColorHell() {
        otherHelpMe = setInterval(assignRandomColorFromID, 1);
    }

    function unleashSynchronizedColorHell() {
        //NEEDS TO SIMULTANEOUSLY ASSIGN RANDOM COLORS TO EACH TABLE ELEMENT 

        //UPDATE 2/9/2018 WHY ARE YOU LIKE THIS JAVASCRIPT
        helpPlease = setInterval(assignRandomColorFromNodes, 10);
    }


</script>

</html>